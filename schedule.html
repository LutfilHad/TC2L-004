<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Schedule Generator</title>
    <link rel="stylesheet" href="style.css">  <!-- Link to external CSS file -->
</head>
<body>

    <h1>Study Schedule Generator</h1>

    <div id="subjects-container">
        <!-- Subject inputs will be added here -->
    </div>

    <button id="add-subject-btn">Add Subject</button>
    <button id="submit-btn">Submit</button>

    <script>
        let subjectCount = 0;
        const maxSubjects = 8;
        const subjectsContainer = document.getElementById('subjects-container');

        document.getElementById('add-subject-btn').addEventListener('click', function() {
            if (subjectCount < maxSubjects) {
                const subjectEntry = document.createElement('div');
                subjectEntry.classList.add('subject-entry');
                subjectEntry.innerHTML = `
                    <label for="subject-${subjectCount}">Subject ${subjectCount + 1}:</label>
                    <input type="text" id="subject-${subjectCount}" placeholder="Enter subject name">
                    <label for="grade-${subjectCount}">Grade:</label>
                    <select id="grade-${subjectCount}">
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                    </select>
                `;
                subjectsContainer.appendChild(subjectEntry);
                subjectCount++;
            } else {
                alert("You can add up to 8 subjects only.");
            }
        });

        document.getElementById('submit-btn').addEventListener('click', function() {
            const subjects = [];
            for (let i = 0; i < subjectCount; i++) {
                const subjectName = document.getElementById(`subject-${i}`).value;
                const grade = document.getElementById(`grade-${i}`).value;
                if (subjectName) {
                    subjects.push({ name: subjectName, grade: grade });
                }
            }
            
            if (subjects.length > 0) {
                // Send data to Flask backend
                fetch('/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ subjects: subjects }),
                })
                .then(response => response.json())
                .then(data => {
                    alert('Your schedule has been created. Check the console for details.');
                    console.log(data.schedule);
                })
                .catch(error => console.error('Error:', error));
            } else {
                alert("Please add at least one subject.");
            }
        });
    </script>
</body>
</html>
